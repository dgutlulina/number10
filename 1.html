<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>å°è±¡å›å®¶å­¦æ•°å­—</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      touch-action: manipulation;
    }
    body {
      font-family: "Comic Sans MS", cursive, sans-serif;
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #333;
    }
    #app {
      width: 100%;
      max-width: 800px;
      height: 90vh;
      position: relative;
    }

    /* é¦–é¡µ */
    #home {
      text-align: center;
      padding: 20px;
    }
    #home h1 {
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #e74c3c;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    .elephant {
      font-size: 5rem;
      margin: 20px 0;
      animation: bounce 2s infinite;
    }
    .number-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 15px;
      margin-top: 20px;
    }
    .num-btn {
      background: #ffd700;
      border: none;
      border-radius: 20px;
      height: 80px;
      font-size: 2.2rem;
      font-weight: bold;
      box-shadow: 0 6px 10px rgba(0,0,0,0.2);
      transition: transform 0.1s;
    }
    .num-btn:active {
      transform: scale(0.95);
    }

    /* æ•°å­—å­¦ä¹ é¡µ */
    .lesson {
      display: none;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      text-align: center;
    }
    .big-number {
      font-size: 8rem;
      font-weight: bold;
      color: #2980b9;
      margin: 20px 0;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
    }
    .task-text {
      font-size: 1.8rem;
      margin: 15px 0;
      color: #2c3e50;
    }
    .items-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      min-height: 150px;
    }
    .item {
      font-size: 3rem;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .item.collected {
      opacity: 0.3;
      transform: scale(0.8);
    }
    .controls {
      margin-top: 20px;
    }
    .speak-btn {
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1.4rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .next-btn {
      background: #e74c3c;
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1.4rem;
      margin-top: 15px;
      display: none;
    }

    /* åº†ç¥åŠ¨ç”» */
    .celebration {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      display: none;
    }
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #f1c40f;
      opacity: 0;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes floatUp {
      to {
        transform: translateY(-100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- é¦–é¡µ -->
    <div id="home">
      <h1>å°è±¡è¦å›å®¶ï¼</h1>
      <div class="elephant">ğŸ˜</div>
      <p>å¸®å®ƒæ”¶é›†è·¯ä¸Šçš„å®è´å§ï¼</p>
      <div class="number-grid">
        <!-- åŠ¨æ€ç”Ÿæˆ 1-10 æŒ‰é’® -->
      </div>
    </div>

    <!-- æ•°å­—å­¦ä¹ é¡µï¼ˆæ¨¡æ¿ï¼‰ -->
    <div id="lesson-template" class="lesson">
      <div class="big-number" id="current-number">1</div>
      <div class="task-text" id="task-text">æ‰¾åˆ° 1 ä¸ªè‹¹æœ</div>
      <div class="items-container" id="items-container">
        <!-- ç‰©å“å°†åŠ¨æ€ç”Ÿæˆ -->
      </div>
      <div class="controls">
        <button class="speak-btn" id="speak-btn">ğŸ”Š å¬ä¸€å¬</button>
        <button class="next-btn" id="next-btn">â¡ï¸ ä¸‹ä¸€ä¸ª</button>
      </div>
    </div>

    <!-- åº†ç¥æ•ˆæœå®¹å™¨ -->
    <div class="celebration" id="celebration"></div>
  </div>

  <script>
    // ç‰©å“æ˜ å°„ï¼ˆæ¯ä¸ªæ•°å­—å¯¹åº”ä¸€ä¸ªç‰©å“ï¼‰
    const itemsMap = {
      1: 'ğŸ',
      2: 'ğŸª¨',
      3: 'ğŸŒ¸',
      4: 'ğŸ¦‹',
      5: 'ğŸŸ',
      6: 'ğŸ„',
      7: 'ğŸŒˆ',
      8: 'ğŸ™',
      9: 'ğŸˆ',
      10: 'ğŸƒ'
    };

    const tasks = {
      1: 'æ‰¾åˆ° 1 ä¸ªè‹¹æœ',
      2: 'æ‰¾åˆ° 2 é¢—çŸ³å¤´',
      3: 'æ‰¾åˆ° 3 æœµèŠ±',
      4: 'æ‰¾åˆ° 4 åªè´è¶',
      5: 'æ‰¾åˆ° 5 æ¡å°é±¼',
      6: 'æ‰¾åˆ° 6 ä¸ªè˜‘è‡',
      7: 'æ‰¾åˆ° 7 é“å½©è™¹',
      8: 'æ‰¾åˆ° 8 åªç« é±¼',
      9: 'æ‰¾åˆ° 9 ä¸ªæ°”çƒ',
      10: 'æ‰¾åˆ° 10 ç‰‡æ ‘å¶'
    };

    let currentNumber = 0;
    let collectedCount = 0;

    // åˆå§‹åŒ–é¦–é¡µæŒ‰é’®
    function initHome() {
      const grid = document.querySelector('.number-grid');
      grid.innerHTML = '';
      for (let i = 1; i <= 10; i++) {
        const btn = document.createElement('button');
        btn.className = 'num-btn';
        btn.textContent = i;
        btn.onclick = () => startLesson(i);
        grid.appendChild(btn);
      }
    }

    // å¼€å§‹å­¦ä¹ æŸæ•°å­—
    function startLesson(num) {
      currentNumber = num;
      collectedCount = 0;
      document.getElementById('home').style.display = 'none';
      const lesson = document.getElementById('lesson-template');
      lesson.style.display = 'flex';

      document.getElementById('current-number').textContent = num;
      document.getElementById('task-text').textContent = tasks[num];

      // ç”Ÿæˆç‰©å“
      const container = document.getElementById('items-container');
      container.innerHTML = '';
      const itemEmoji = itemsMap[num];
      for (let i = 0; i < num; i++) {
        const item = document.createElement('div');
        item.className = 'item';
        item.textContent = itemEmoji;
        item.onclick = () => collectItem(item);
        container.appendChild(item);
      }

      document.getElementById('next-btn').style.display = 'none';
      speakText(`æ•°å­— ${num}ï¼${tasks[num]}ï¼Œç‚¹ä¸€ç‚¹æ‰¾ä¸€æ‰¾ï¼`);
    }

    // æ”¶é›†ç‰©å“
    function collectItem(item) {
      if (item.classList.contains('collected')) return;
      item.classList.add('collected');
      item.style.animation = 'pop 0.3s forwards';
      collectedCount++;

      // æ’­æ”¾çŸ­æç¤ºéŸ³ï¼ˆå¯ç”¨ç®€å• beepï¼Œæ­¤å¤„ç”¨è¯­éŸ³ï¼‰
      if (collectedCount === 1) {
        speakText(`æ‰¾åˆ°å•¦ï¼`);
      }

      if (collectedCount === currentNumber) {
        celebrate();
        setTimeout(() => {
          document.getElementById('next-btn').style.display = 'block';
        }, 1500);
      }
    }

    // åº†ç¥åŠ¨ç”»
    function celebrate() {
      const celeb = document.getElementById('celebration');
      celeb.style.display = 'block';
      celeb.innerHTML = '';

      // åˆ›å»ºå½©çº¸
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = ['#f1c40f', '#e74c3c', '#2ecc71', '#3498db'][Math.floor(Math.random() * 4)];
        confetti.style.width = (Math.random() * 10 + 5) + 'px';
        confetti.style.height = confetti.style.width;
        confetti.style.opacity = '0';
        confetti.style.animation = `floatUp ${Math.random() * 3 + 2}s forwards`;
        celeb.appendChild(confetti);
      }

      speakText(`å¤ªæ£’å•¦ï¼ä½ å¸®å°è±¡æ‰¾åˆ°äº† ${currentNumber} ä¸ªå®è´ï¼`);
    }

    // è¯­éŸ³æ’­æŠ¥ï¼ˆä½¿ç”¨ Web Speech APIï¼‰
    function speakText(text) {
      if ('speechSynthesis' in window) {
        // å–æ¶ˆæ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
        speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN';
        utterance.rate = 0.9;
        utterance.pitch = 1.1;
        speechSynthesis.speak(utterance);
      }
    }

    // ä¸‹ä¸€å…³
    document.getElementById('next-btn').onclick = () => {
      document.getElementById('celebration').style.display = 'none';
      if (currentNumber < 10) {
        startLesson(currentNumber + 1);
      } else {
        // å…¨éƒ¨å®Œæˆï¼Œè¿”å›é¦–é¡µ
        alert('å°è±¡å®‰å…¨åˆ°å®¶å•¦ï¼è°¢è°¢ä½ ï¼ğŸ‰');
        document.getElementById('lesson-template').style.display = 'none';
        document.getElementById('home').style.display = 'block';
      }
    };

    // é‡å¬æŒ‰é’®
    document.getElementById('speak-btn').onclick = () => {
      speakText(`æ•°å­— ${currentNumber}ï¼${tasks[currentNumber]}`);
    };

    // åˆå§‹åŒ–
    window.onload = () => {
      initHome();
    };
  </script>
</body>
</html>


