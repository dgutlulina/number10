<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数字乐园 - 2岁儿童数字学习</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 自定义 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3498db',    // 明亮的蓝色
                        secondary: '#f39c12',  // 活泼的橙色
                        accent: '#2ecc71',     // 绿色
                        light: '#ecf0f1',      // 浅灰色
                        dark: '#34495e',       // 深灰色
                    },
                    fontFamily: {
                        sans: ['Comic Sans MS', 'Arial', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .card-shadow {
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
            .btn-pop {
                transition: transform 0.2s;
            }
            .btn-pop:hover {
                transform: scale(1.05);
            }
            .btn-pop:active {
                transform: scale(0.95);
            }
        }
        
        /* 自定义样式 */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #f9f9f9;
            overflow-x: hidden;
        }
        
        .number-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .number-card:hover {
            transform: translateY(-5px);
        }
        
        .fruit-item, .animal-item {
            transition: all 0.3s ease;
        }
        
        .fruit-item:hover, .animal-item:hover {
            transform: scale(1.1);
        }
        
        .game-area {
            min-height: 300px;
        }
        
        .progress-circle {
            transition: stroke-dashoffset 0.5s ease;
        }
        
        /* 动画效果 */
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .celebrate {
            animation: celebrate 0.5s ease;
        }
        
        /* 拖拽样式 */
        .draggable {
            cursor: grab;
        }
        
        .draggable:active {
            cursor: grabbing;
        }
        
        .drop-target {
            transition: all 0.2s ease;
        }
        
        .drop-target.highlight {
            background-color: rgba(46, 204, 113, 0.2);
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-purple-50">
    <!-- 顶部导航栏 -->
    <nav class="bg-primary text-white p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-star text-secondary text-2xl animate-bounce-slow"></i>
                <h1 class="text-2xl font-bold">数字乐园</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button id="progress-btn" class="bg-secondary hover:bg-yellow-500 text-white px-4 py-2 rounded-full btn-pop flex items-center">
                    <i class="fa fa-trophy mr-2"></i>
                    <span>学习进度</span>
                </button>
                <button id="help-btn" class="bg-white text-primary hover:bg-gray-100 px-4 py-2 rounded-full btn-pop">
                    <i class="fa fa-question-circle"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="container mx-auto p-4">
        <!-- 欢迎区域 -->
        <section id="welcome-section" class="text-center py-8">
            <div class="max-w-2xl mx-auto">
                <h2 class="text-4xl font-bold text-primary mb-4">欢迎来到数字乐园！</h2>
                <p class="text-xl text-gray-600 mb-8">一起学习数字1-10，玩有趣的游戏吧！</p>
                <div class="flex justify-center space-x-4">
                    <button id="start-learning-btn" class="bg-primary hover:bg-blue-600 text-white text-xl px-8 py-3 rounded-full btn-pop shadow-lg">
                        开始学习
                    </button>
                    <button id="play-games-btn" class="bg-secondary hover:bg-yellow-500 text-white text-xl px-8 py-3 rounded-full btn-pop shadow-lg">
                        玩游戏
                    </button>
                </div>
            </div>
        </section>

        <!-- 数字学习区域 -->
        <section id="learning-section" class="hidden">
            <h2 class="text-3xl font-bold text-primary mb-6 text-center">学习数字</h2>
            
            <!-- 数字选择器 -->
            <div class="flex justify-center mb-8 overflow-x-auto pb-2">
                <div class="flex space-x-3">
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="1">1</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="2">2</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="3">3</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="4">4</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="5">5</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="6">6</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="7">7</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="8">8</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="9">9</button>
                    <button class="number-selector bg-primary text-white w-16 h-16 rounded-full text-2xl font-bold btn-pop" data-number="10">10</button>
                </div>
            </div>
            
            <!-- 当前学习的数字 -->
            <div id="current-number" class="max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div class="flex flex-col md:flex-row items-center">
                    <!-- 数字卡片 -->
                    <div class="number-card bg-primary text-white rounded-2xl p-8 mb-6 md:mb-0 md:mr-8 w-full md:w-1/3 flex justify-center">
                        <span class="text-9xl font-bold" id="number-display">1</span>
                    </div>
                    
                    <!-- 数量展示 -->
                    <div class="w-full md:w-2/3">
                        <h3 class="text-2xl font-bold text-center mb-4">数量展示</h3>
                        <div id="items-container" class="flex flex-wrap justify-center gap-4 min-h-[200px]">
                            <!-- 数量物品将通过JS动态添加 -->
                        </div>
                    </div>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex justify-center space-x-4 mt-6">
                    <button id="play-audio-btn" class="bg-secondary hover:bg-yellow-500 text-white px-6 py-3 rounded-full btn-pop flex items-center">
                        <i class="fa fa-volume-up mr-2"></i>
                        播放发音
                    </button>
                    <button id="mark-as-learned-btn" class="bg-accent hover:bg-green-600 text-white px-6 py-3 rounded-full btn-pop flex items-center">
                        <i class="fa fa-check-circle mr-2"></i>
                        标记为已学习
                    </button>
                </div>
            </div>
            
            <!-- 学习提示 -->
            <div class="bg-blue-50 border-l-4 border-primary p-4 rounded-lg mb-8">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fa fa-info-circle text-primary text-xl"></i>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-lg font-semibold text-primary">学习小贴士</h3>
                        <p class="text-gray-600">点击数字卡片或播放按钮可以听到数字的发音。数一数有多少个物品，帮助孩子理解数字的含义。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 游戏区域 -->
        <section id="games-section" class="hidden">
            <h2 class="text-3xl font-bold text-primary mb-6 text-center">数字游戏</h2>
            
            <!-- 游戏选择 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- 拖拽匹配游戏 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/2307172198525829143~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784438566&x-signature=hlU2%2BdptzLFInEtKyGpn6iZr7oI%3D" alt="拖拽匹配游戏" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold text-primary mb-2">数字匹配</h3>
                        <p class="text-gray-600 mb-4">将数字拖到对应的数量上，锻炼数字认知能力！</p>
                        <button id="start-matching-game-btn" class="bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-full btn-pop w-full">
                            开始游戏
                        </button>
                    </div>
                </div>
                
                <!-- 点击计数游戏 -->
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <img src="https://p11-doubao-search-sign.byteimg.com/labis/8beba5f4a4e3708959a250cfb913b99b~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784438571&x-signature=pC0rd0F7AP%2F3xgLDb%2F0%2FWf13g0Q%3D" alt="点击计数游戏" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold text-primary mb-2">点击计数</h3>
                        <p class="text-gray-600 mb-4">根据数字提示，点击对应数量的物品，训练计数能力！</p>
                        <button id="start-counting-game-btn" class="bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-full btn-pop w-full">
                            开始游戏
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏区域 -->
            <div id="game-area" class="hidden bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="game-title" class="text-2xl font-bold text-primary">游戏标题</h3>
                    <div class="flex items-center">
                        <span class="text-lg mr-2">难度：</span>
                        <select id="game-difficulty" class="bg-light border border-gray-300 rounded-lg px-3 py-2">
                            <option value="easy">简单</option>
                            <option value="medium">中等</option>
                            <option value="hard">困难</option>
                        </select>
                    </div>
                </div>
                
                <!-- 游戏说明 -->
                <div id="game-instructions" class="bg-blue-50 border-l-4 border-primary p-4 rounded-lg mb-6">
                    <!-- 游戏说明将通过JS动态添加 -->
                </div>
                
                <!-- 游戏内容 -->
                <div id="game-content" class="game-area flex flex-col items-center justify-center mb-6">
                    <!-- 游戏内容将通过JS动态添加 -->
                </div>
                
                <!-- 游戏控制 -->
                <div class="flex justify-between">
                    <button id="back-to-games-btn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-full btn-pop">
                        返回游戏列表
                    </button>
                    <button id="next-game-btn" class="bg-secondary hover:bg-yellow-500 text-white px-6 py-2 rounded-full btn-pop">
                        下一题
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- 底部导航 -->
    <footer class="bg-dark text-white p-4 mt-8">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h3 class="text-xl font-bold">数字乐园</h3>
                    <p class="text-gray-400">为2岁儿童设计的数字学习网站</p>
                </div>
                <div class="flex space-x-4">
                    <button id="home-btn" class="bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-full btn-pop">
                        <i class="fa fa-home mr-2"></i>
                        首页
                    </button>
                    <button id="about-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-full btn-pop">
                        <i class="fa fa-info-circle mr-2"></i>
                        关于
                    </button>
                </div>
            </div>
        </div>
    </footer>

    <!-- 模态框 -->
    <!-- 进度模态框 -->
    <div id="progress-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-primary">学习进度</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold">总体进度</span>
                    <span id="overall-progress">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div id="overall-progress-bar" class="bg-accent h-4 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="numbers-progress" class="space-y-4">
                <!-- 数字进度将通过JS动态添加 -->
            </div>
            
            <div class="mt-8 text-center">
                <button class="close-modal bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-full btn-pop">
                    关闭
                </button>
            </div>
        </div>
    </div>
    
    <!-- 帮助模态框 -->
    <div id="help-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-primary">使用帮助</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <h4 class="text-lg font-bold text-secondary mb-2">学习数字</h4>
                    <p>点击"开始学习"按钮，选择要学习的数字。点击数字卡片或播放按钮可以听到数字的发音。</p>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold text-secondary mb-2">玩游戏</h4>
                    <p>点击"玩游戏"按钮，选择喜欢的游戏。根据游戏说明进行操作，完成游戏任务。</p>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold text-secondary mb-2">学习进度</h4>
                    <p>点击顶部的"学习进度"按钮，可以查看孩子已经学习了哪些数字，以及掌握的程度。</p>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button class="close-modal bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-full btn-pop">
                    我知道了
                </button>
            </div>
        </div>
    </div>
    
    <!-- 关于模态框 -->
    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-primary">关于数字乐园</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <p>数字乐园是一个专为2岁儿童设计的数字学习网站，通过互动游戏和视觉刺激帮助孩子认识和学习数字1-10。</p>
                
                <p>网站特点：</p>
                <ul class="list-disc pl-5 space-y-2">
                    <li>大而清晰的数字展示</li>
                    <li>生动有趣的互动游戏</li>
                    <li>标准的数字发音</li>
                    <li>学习进度追踪</li>
                    <li>自适应难度设置</li>
                </ul>
                
                <p class="text-sm text-gray-500 mt-6">版本：1.0.0</p>
            </div>
            
            <div class="mt-8 text-center">
                <button class="close-modal bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-full btn-pop">
                    关闭
                </button>
            </div>
        </div>
    </div>

    <!-- 成功提示 -->
    <div id="success-toast" class="fixed bottom-4 right-4 bg-accent text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
        <i class="fa fa-check-circle mr-2"></i>
        <span id="success-message">操作成功！</span>
    </div>

    <!-- JavaScript -->
    <script>
        // 数字数据
        const numbersData = [
            {
                number: 1,
                color: '#3498db', // 蓝色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' }
                ]
            },
            {
                number: 2,
                color: '#e74c3c', // 红色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' }
                ]
            },
            {
                number: 3,
                color: '#2ecc71', // 绿色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' }
                ]
            },
            {
                number: 4,
                color: '#f39c12', // 橙色
                items: [
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' }
                ]
            },
            {
                number: 5,
                color: '#9b59b6', // 紫色
                items: [
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' }
                ]
            },
            {
                number: 6,
                color: '#1abc9c', // 青绿色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' }
                ]
            },
            {
                number: 7,
                color: '#e67e22', // 深橙色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' }
                ]
            },
            {
                number: 8,
                color: '#34495e', // 深灰色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/labis/4d7905e32bdd2cd5c9a63fa905d2876d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=wmHe2Tm03%2Ba8lxbi0fvRaLAvdYs%3D' }
                ]
            },
            {
                number: 9,
                color: '#f1c40f', // 黄色
                items: [
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' },
                    { type: 'fruit', image: 'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1717742053836455945~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=%2BrygenooqctUQ0Qjd2MG5u%2BrI%2Bo%3D' }
                ]
            },
            {
                number: 10,
                color: '#16a085', // 蓝绿色
                items: [
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' },
                    { type: 'fruit', image: 'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1716310043040677895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784439657&x-signature=mCS30uCbA%2BSOSdDdKLE7boPhHI8%3D' }
                ]
            }
        ];

        // 游戏数据
        const gameData = {
            matching: {
                title: "数字匹配游戏",
                instructions: "将数字拖到对应的数量上，锻炼数字认知能力！",
                difficulty: {
                    easy: { numbers: 3, range: [1, 5] },
                    medium: { numbers: 5, range: [1, 8] },
                    hard: { numbers: 8, range: [1, 10] }
                }
            },
            counting: {
                title: "点击计数游戏",
                instructions: "根据数字提示，点击对应数量的物品，训练计数能力！",
                difficulty: {
                    easy: { numbers: 3, range: [1, 5] },
                    medium: { numbers: 5, range: [1, 8] },
                    hard: { numbers: 8, range: [1, 10] }
                }
            }
        };

        // 当前状态
        let currentState = {
            currentNumber: 1,
            learnedNumbers: [],
            currentGame: null,
            currentGameData: null,
            gameScore: 0,
            gameAttempts: 0
        };

        // DOM 元素
        const sections = {
            welcome: document.getElementById('welcome-section'),
            learning: document.getElementById('learning-section'),
            games: document.getElementById('games-section')
        };

        const modals = {
            progress: document.getElementById('progress-modal'),
            help: document.getElementById('help-modal'),
            about: document.getElementById('about-modal')
        };

        // 初始化
        function init() {
            // 加载保存的学习进度
            loadProgress();
            
            // 设置事件监听器
            setupEventListeners();
            
            // 初始化数字选择器
            initNumberSelectors();
            
            // 更新学习进度
            updateProgressDisplay();
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 导航按钮
            document.getElementById('start-learning-btn').addEventListener('click', () => showSection('learning'));
            document.getElementById('play-games-btn').addEventListener('click', () => showSection('games'));
            document.getElementById('home-btn').addEventListener('click', () => showSection('welcome'));
            document.getElementById('about-btn').addEventListener('click', () => toggleModal('about'));
            
            // 模态框按钮
            document.getElementById('progress-btn').addEventListener('click', () => toggleModal('progress'));
            document.getElementById('help-btn').addEventListener('click', () => toggleModal('help'));
            
            // 关闭模态框按钮
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', () => {
                    Object.values(modals).forEach(modal => {
                        modal.classList.add('hidden');
                    });
                });
            });
            
            // 学习区域按钮
            document.getElementById('play-audio-btn').addEventListener('click', playNumberAudio);
            document.getElementById('mark-as-learned-btn').addEventListener('click', markAsLearned);
            
            // 游戏区域按钮
            document.getElementById('start-matching-game-btn').addEventListener('click', () => startGame('matching'));
            document.getElementById('start-counting-game-btn').addEventListener('click', () => startGame('counting'));
            document.getElementById('back-to-games-btn').addEventListener('click', backToGames);
            document.getElementById('next-game-btn').addEventListener('click', nextGame);
            
            // 游戏难度选择
            document.getElementById('game-difficulty').addEventListener('change', () => {
                if (currentState.currentGame) {
                    startGame(currentState.currentGame);
                }
            });
        }

        // 初始化数字选择器
        function initNumberSelectors() {
            const selectors = document.querySelectorAll('.number-selector');
            selectors.forEach(selector => {
                const number = parseInt(selector.dataset.number);
                const numberData = numbersData[number - 1];
                
                // 设置背景颜色
                selector.style.backgroundColor = numberData.color;
                
                // 添加点击事件
                selector.addEventListener('click', () => {
                    currentState.currentNumber = number;
                    updateNumberDisplay();
                });
                
                // 如果数字已学习，添加标记
                if (currentState.learnedNumbers.includes(number)) {
                    selector.innerHTML += '<i class="fa fa-check-circle absolute bottom-1 right-1"></i>';
                    selector.classList.add('relative');
                }
            });
        }

        // 更新数字显示
        function updateNumberDisplay() {
            const numberData = numbersData[currentState.currentNumber - 1];
            const numberDisplay = document.getElementById('number-display');
            const numberCard = document.querySelector('.number-card');
            const itemsContainer = document.getElementById('items-container');
            
            // 更新数字和颜色
            numberDisplay.textContent = currentState.currentNumber;
            numberCard.style.backgroundColor = numberData.color;
            
            // 清空物品容器
            itemsContainer.innerHTML = '';
            
            // 添加物品
            numberData.items.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = `${item.type}-item w-24 h-24 flex items-center justify-center animate-float`;
                itemElement.style.animationDelay = `${index * 0.2}s`;
                
                const img = document.createElement('img');
                img.src = item.image;
                img.alt = `${item.type} ${index + 1}`;
                img.className = 'w-full h-full object-contain';
                
                itemElement.appendChild(img);
                itemsContainer.appendChild(itemElement);
            });
        }

        // 播放数字音频
        function playNumberAudio() {
            // 检查浏览器是否支持语音合成API
            if ('speechSynthesis' in window) {
                // 创建语音合成实例
                const utterance = new SpeechSynthesisUtterance();
                
                // 设置语音参数
                utterance.text = `${currentState.currentNumber}`;
                utterance.lang = 'zh-CN';
                utterance.rate = 0.8; // 语速稍慢，适合儿童
                utterance.pitch = 1.2; // 音调稍高，更活泼
                
                // 播放语音
                window.speechSynthesis.speak(utterance);
                
                // 添加视觉反馈
                const numberDisplay = document.getElementById('number-display');
                numberDisplay.classList.add('celebrate');
                setTimeout(() => {
                    numberDisplay.classList.remove('celebrate');
                }, 500);
                
                // 显示成功提示
                showSuccessToast(`正在播放数字 ${currentState.currentNumber}`);
            } else {
                // 如果浏览器不支持语音合成API，使用原来的音频生成方法
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'sine';
                oscillator.frequency.value = 220 + (currentState.currentNumber - 1) * 50;
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.start();
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                setTimeout(() => {
                    oscillator.stop();
                }, 1000);
                
                const numberDisplay = document.getElementById('number-display');
                numberDisplay.classList.add('celebrate');
                setTimeout(() => {
                    numberDisplay.classList.remove('celebrate');
                }, 500);
                
                showSuccessToast(`正在播放数字 ${currentState.currentNumber}`);
            }
        }

        // 标记为已学习
        function markAsLearned() {
            if (!currentState.learnedNumbers.includes(currentState.currentNumber)) {
                currentState.learnedNumbers.push(currentState.currentNumber);
                saveProgress();
                
                // 更新数字选择器
                const selector = document.querySelector(`.number-selector[data-number="${currentState.currentNumber}"]`);
                if (selector && !selector.querySelector('.fa-check-circle')) {
                    selector.innerHTML += '<i class="fa fa-check-circle absolute bottom-1 right-1"></i>';
                    selector.classList.add('relative');
                }
                
                // 更新进度显示
                updateProgressDisplay();
                
                // 显示成功提示
                showSuccessToast(`数字 ${currentState.currentNumber} 已标记为已学习！`);
            }
        }

        // 显示学习进度
        function updateProgressDisplay() {
            const learnedCount = currentState.learnedNumbers.length;
            const totalCount = numbersData.length;
            const percentage = Math.round((learnedCount / totalCount) * 100);
            
            // 更新总体进度
            document.getElementById('overall-progress').textContent = `${percentage}%`;
            document.getElementById('overall-progress-bar').style.width = `${percentage}%`;
            
            // 更新数字进度
            const numbersProgress = document.getElementById('numbers-progress');
            numbersProgress.innerHTML = '';
            
            numbersData.forEach(numberData => {
                const isLearned = currentState.learnedNumbers.includes(numberData.number);
                
                const progressItem = document.createElement('div');
                progressItem.className = 'flex items-center justify-between';
                
                const numberElement = document.createElement('div');
                numberElement.className = 'flex items-center';
                numberElement.innerHTML = `
                    <div class="w-10 h-10 rounded-full flex items-center justify-center mr-3" style="background-color: ${numberData.color}">
                        <span class="text-white font-bold">${numberData.number}</span>
                    </div>
                    <span>${numberData.number}</span>
                `;
                
                const statusElement = document.createElement('div');
                statusElement.className = isLearned ? 'text-accent' : 'text-gray-400';
                statusElement.innerHTML = isLearned ? 
                    '<i class="fa fa-check-circle mr-1"></i> 已学习' : 
                    '<i class="fa fa-circle-o mr-1"></i> 未学习';
                
                progressItem.appendChild(numberElement);
                progressItem.appendChild(statusElement);
                numbersProgress.appendChild(progressItem);
            });
        }

        // 开始游戏
        function startGame(gameType) {
            currentState.currentGame = gameType;
            currentState.gameScore = 0;
            currentState.gameAttempts = 0;
            
            const gameArea = document.getElementById('game-area');
            const gameTitle = document.getElementById('game-title');
            const gameInstructions = document.getElementById('game-instructions');
            
            // 显示游戏区域
            gameArea.classList.remove('hidden');
            
            // 设置游戏标题和说明
            gameTitle.textContent = gameData[gameType].title;
            gameInstructions.innerHTML = `
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fa fa-info-circle text-primary text-xl"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-gray-600">${gameData[gameType].instructions}</p>
                    </div>
                </div>
            `;
            
            // 根据游戏类型和难度生成游戏内容
            generateGameContent();
        }

        // 生成游戏内容
        function generateGameContent() {
            const gameContent = document.getElementById('game-content');
            const difficulty = document.getElementById('game-difficulty').value;
            const gameConfig = gameData[currentState.currentGame].difficulty[difficulty];
            
            // 清空游戏内容
            gameContent.innerHTML = '';
            
            if (currentState.currentGame === 'matching') {
                generateMatchingGame(gameConfig);
            } else if (currentState.currentGame === 'counting') {
                generateCountingGame(gameConfig);
            }
        }

        // 生成匹配游戏内容
        function generateMatchingGame(config) {
            const gameContent = document.getElementById('game-content');
            
            // 创建游戏容器
            const gameContainer = document.createElement('div');
            gameContainer.className = 'w-full';
            
            // 创建数字区域
            const numbersContainer = document.createElement('div');
            numbersContainer.className = 'flex justify-center flex-wrap gap-4 mb-8';
            
            // 创建数量区域
            const quantitiesContainer = document.createElement('div');
            quantitiesContainer.className = 'flex justify-center flex-wrap gap-8';
            
            // 随机选择数字
            const availableNumbers = Array.from({length: config.range[1] - config.range[0] + 1}, (_, i) => i + config.range[0]);
            const selectedNumbers = [];
            
            while (selectedNumbers.length < config.numbers) {
                const randomIndex = Math.floor(Math.random() * availableNumbers.length);
                const number = availableNumbers.splice(randomIndex, 1)[0];
                
                if (!selectedNumbers.includes(number)) {
                    selectedNumbers.push(number);
                }
            }
            
            // 打乱数字顺序
            const shuffledNumbers = [...selectedNumbers].sort(() => Math.random() - 0.5);
            
            // 添加数字卡片
            shuffledNumbers.forEach(number => {
                const numberData = numbersData[number - 1];
                
                const numberCard = document.createElement('div');
                numberCard.className = 'draggable bg-white rounded-xl shadow-md p-4 w-20 h-20 flex items-center justify-center cursor-grab';
                numberCard.draggable = true;
                numberCard.dataset.number = number;
                
                const numberSpan = document.createElement('span');
                numberSpan.className = 'text-4xl font-bold';
                numberSpan.style.color = numberData.color;
                numberSpan.textContent = number;
                
                numberCard.appendChild(numberSpan);
                numbersContainer.appendChild(numberCard);
                
                // 添加拖拽事件
                numberCard.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', number);
                    setTimeout(() => {
                        numberCard.classList.add('opacity-50');
                    }, 0);
                });
                
                numberCard.addEventListener('dragend', () => {
                    numberCard.classList.remove('opacity-50');
                });
            });
            
            // 打乱数量顺序
            const shuffledQuantities = [...selectedNumbers].sort(() => Math.random() - 0.5);
            
            // 添加数量卡片
            shuffledQuantities.forEach(number => {
                const numberData = numbersData[number - 1];
                
                const quantityCard = document.createElement('div');
                quantityCard.className = 'drop-target bg-white rounded-xl shadow-md p-4 w-32 h-32 flex flex-col items-center justify-center';
                quantityCard.dataset.number = number;
                
                const itemsContainer = document.createElement('div');
                itemsContainer.className = 'flex flex-wrap justify-center gap-2';
                
                // 添加物品
                numberData.items.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = `w-10 h-10 flex items-center justify-center`;
                    
                    const img = document.createElement('img');
                    img.src = item.image;
                    img.alt = `${item.type} ${index + 1}`;
                    img.className = 'w-full h-full object-contain';
                    
                    itemElement.appendChild(img);
                    itemsContainer.appendChild(itemElement);
                });
                
                quantityCard.appendChild(itemsContainer);
                quantitiesContainer.appendChild(quantityCard);
                
                // 添加拖放事件
                quantityCard.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    quantityCard.classList.add('highlight');
                });
                
                quantityCard.addEventListener('dragleave', () => {
                    quantityCard.classList.remove('highlight');
                });
                
                quantityCard.addEventListener('drop', (e) => {
                    e.preventDefault();
                    quantityCard.classList.remove('highlight');
                    
                    const draggedNumber = parseInt(e.dataTransfer.getData('text/plain'));
                    const targetNumber = parseInt(quantityCard.dataset.number);
                    
                    if (draggedNumber === targetNumber) {
                        // 匹配成功
                        const draggedCard = document.querySelector(`.draggable[data-number="${draggedNumber}"]`);
                        draggedCard.classList.add('opacity-0', 'pointer-events-none');
                        
                        quantityCard.classList.add('bg-green-100', 'border-2', 'border-green-500');
                        
                        // 更新分数
                        currentState.gameScore++;
                        currentState.gameAttempts++;
                        
                        // 显示成功提示
                        showSuccessToast('匹配成功！');
                        
                        // 检查是否完成所有匹配
                        const remainingCards = document.querySelectorAll('.draggable:not(.opacity-0)');
                        if (remainingCards.length === 0) {
                            setTimeout(() => {
                                showSuccessToast(`游戏完成！得分：${currentState.gameScore}/${currentState.gameAttempts}`);
                            }, 500);
                        }
                    } else {
                        // 匹配失败
                        quantityCard.classList.add('bg-red-100');
                        setTimeout(() => {
                            quantityCard.classList.remove('bg-red-100');
                        }, 500);
                        
                        currentState.gameAttempts++;
                        
                        // 显示失败提示
                        showSuccessToast('匹配失败，请再试一次！', 'error');
                    }
                });
            });
            
            gameContainer.appendChild(numbersContainer);
            gameContainer.appendChild(quantitiesContainer);
            gameContent.appendChild(gameContainer);
        }

        // 生成计数游戏内容
        function generateCountingGame(config) {
            const gameContent = document.getElementById('game-content');
            
            // 创建游戏容器
            const gameContainer = document.createElement('div');
            gameContainer.className = 'w-full';
            
            // 创建提示区域
            const hintContainer = document.createElement('div');
            hintContainer.className = 'text-center mb-6';
            
            const hintText = document.createElement('h3');
            hintText.className = 'text-2xl font-bold text-primary';
            hintText.textContent = '点击下面的物品，数量为：';
            
            const targetNumber = document.createElement('span');
            targetNumber.id = 'target-number';
            targetNumber.className = 'text-4xl font-bold text-secondary ml-2';
            
            // 随机选择目标数字
            const targetNum = Math.floor(Math.random() * (config.range[1] - config.range[0] + 1)) + config.range[0];
            targetNumber.textContent = targetNum;
            
            hintText.appendChild(targetNumber);
            hintContainer.appendChild(hintText);
            
            // 创建计数器
            const counterContainer = document.createElement('div');
            counterContainer.className = 'text-center mb-6';
            
            const counterText = document.createElement('p');
            counterText.className = 'text-xl';
            counterText.innerHTML = `已点击：<span id="click-counter" class="font-bold text-primary">0</span>`;
            
            counterContainer.appendChild(counterText);
            
            // 创建物品区域
            const itemsContainer = document.createElement('div');
            itemsContainer.id = 'counting-items-container';
            itemsContainer.className = 'flex flex-wrap justify-center gap-4';
            
            // 随机选择物品类型
            const itemTypes = ['fruit', 'animal'];
            const selectedType = itemTypes[Math.floor(Math.random() * itemTypes.length)];
            
            // 随机选择物品图片
            const itemImages = [
                // 小猫
                'https://p26-doubao-search-sign.byteimg.com/labis/321aafbc92d65b0bd18918ceac9e8e6a~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=kzm2BcY%2Bh70Xr5r%2Bj3SupJBBPwI%3D',
                'https://p26-doubao-search-sign.byteimg.com/labis/2829bc8c34ecbe62480fef3afe8a51f3~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=N7FlUuFfinQT7fiB30LjrEJpZlA%3D',
                'https://p26-doubao-search-sign.byteimg.com/labis/847d870b9fba4cb4797b5036d2318500~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=LNAqixhJgtXyQpqr%2FavhsvuLc%2Bg%3D',
                'https://p26-doubao-search-sign.byteimg.com/labis/23c7186445344104e52ff4912c3d4f26~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=Wbv4an95I4Y8EH5jXg%2F%2Bryvtjns%3D',
                // 小狗
                'https://p26-doubao-search-sign.byteimg.com/labis/a35abd099a74d922b17132260971bff0~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=e2qk1jUYr2Cyy0BPj7Ik0L2Cyfg%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/4722a403af7db2f5e01604cdd9debbf3~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=FRZccfKz0l6OtnzcLbZ80TCXRyk%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/73f1912265016ac5c26198c4349e4f4e~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=5BAfO3JJVDBKlFALzMH4XGvftO8%3D',
                'https://p11-doubao-search-sign.byteimg.com/labis/a6306c0239cf082565e3f95ba095874d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=Lso1p2vgs8fkN0bXG9pv5M9Tc4k%3D',
                // 小熊
                'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/966953286330220554~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=QM6kTwJIyG7WH9vaYed7u%2F6S38U%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/7b4ec2e732a691a7e4bfaf9f91ef54b5~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=hEuE%2BT2ZKR0OXj5PeeqrdLWuWdw%3D',
                'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1004251340674957387~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=BE2rB6lXGkAKhnf3KRC6Odfvak8%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/944d3b9e50139381455a637bd1934f0e~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=Gruab09ResV6qo88yGnl34edpIc%3D',
                // 小兔子
                'https://p3-doubao-search-sign.byteimg.com/labis/6f53dc9da3d46117b72e796f725f4f97~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=WCDrOOz5tF60lxctV1PZqcrM5OI%3D',
                'https://p26-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1071867354301726895~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=jmn6NMBILbiMxXImlnCuePQxf%2F4%3D',
                'https://p3-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/907547471828090938~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=yCqnuJyk7Q4%2F%2B%2Fj5LGMjlLgPyXw%3D',
                'https://p11-doubao-search-sign.byteimg.com/tos-cn-i-be4g95zd3a/1072169737179234398~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=cmL4giFMyH%2BW0idVxywvQrr%2BInA%3D',
                // 小鸟
                'https://p3-doubao-search-sign.byteimg.com/labis/a93ab212496f78bc411fb4a900f61443~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=mMa09l2l0ZKW6hHev3x7F8Rdd0o%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/2490b06a498cda02b9a0da5aacf9db1d~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=7VxsD82crBsFM68%2B8w0mRLMusCg%3D',
                'https://p11-doubao-search-sign.byteimg.com/labis/5c2c23fc9ad1cb5a35235a289fa2785f~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=cFCP3O3iqI40TO3xEN0HfbAHatU%3D',
                'https://p3-doubao-search-sign.byteimg.com/labis/8bfc5224f235921589acf30abc8a4a95~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=E%2FwtQCsEBKUdBc0cWv7Ex%2F7mLBs%3D',
                // 小鱼
                'https://p11-doubao-search-sign.byteimg.com/labis/0026075415c91198024a33c5b03b93ee~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=3xWIOgSR%2FBki5xXN2g%2BO6tjmR%2Bk%3D',
                'https://p26-doubao-search-sign.byteimg.com/labis/4beb61141311bea769aa7f8941ebf33e~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=qG%2BDUWlwRdk7i0mLyXAcykRi5z0%3D',
                'https://p26-doubao-search-sign.byteimg.com/labis/9fc58fa4ae0338680aa6186521f78bf5~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=NeqJM%2FpkVsIM7CBIJYn7bp5Xk3Q%3D',
                'https://p11-doubao-search-sign.byteimg.com/labis/3e3b65d5d7457d0182700c862abb4561~tplv-be4g95zd3a-image.jpeg?lk3s=feb11e32&x-expires=1784440877&x-signature=1nxCnjun0bUp0Ykvdt2kliTdNhM%3D'
            ];
            
            const selectedImage = itemImages[Math.floor(Math.random() * itemImages.length)];
            
            // 添加物品（数量比目标数量多）
            const totalItems = targetNum + Math.floor(Math.random() * 5) + 3;
            
            for (let i = 0; i < totalItems; i++) {
                const itemElement = document.createElement('div');
                itemElement.className = 'counting-item w-20 h-20 flex items-center justify-center cursor-pointer animate-float';
                itemElement.style.animationDelay = `${i * 0.1}s`;
                itemElement.dataset.index = i;
                
                const img = document.createElement('img');
                img.src = selectedImage;
                img.alt = `${selectedType} ${i + 1}`;
                img.className = 'w-full h-full object-contain';
                
                itemElement.appendChild(img);
                itemsContainer.appendChild(itemElement);
                
                // 添加点击事件
                itemElement.addEventListener('click', () => {
                    if (!itemElement.classList.contains('clicked')) {
                        // 标记为已点击
                        itemElement.classList.add('clicked', 'opacity-50');
                        
                        // 更新计数器
                        const clickCounter = document.getElementById('click-counter');
                        const currentCount = parseInt(clickCounter.textContent);
                        clickCounter.textContent = currentCount + 1;
                        
                        // 检查是否达到目标数量
                        if (currentCount + 1 === targetNum) {
                            // 禁用所有物品
                            const allItems = document.querySelectorAll('.counting-item:not(.clicked)');
                            allItems.forEach(item => {
                                item.classList.add('opacity-30', 'pointer-events-none');
                            });
                            
                            // 更新分数
                            currentState.gameScore++;
                            currentState.gameAttempts++;
                            
                            // 显示成功提示
                            showSuccessToast('恭喜你，数量正确！');
                        } else if (currentCount + 1 > targetNum) {
                            // 禁用所有物品
                            const allItems = document.querySelectorAll('.counting-item');
                            allItems.forEach(item => {
                                item.classList.add('opacity-30', 'pointer-events-none');
                            });
                            
                            // 更新分数
                            currentState.gameAttempts++;
                            
                            // 显示失败提示
                            showSuccessToast('数量超过了目标，再试一次！', 'error');
                        }
                    }
                });
            }
            
            gameContainer.appendChild(hintContainer);
            gameContainer.appendChild(counterContainer);
            gameContainer.appendChild(itemsContainer);
            gameContent.appendChild(gameContainer);
        }

        // 返回游戏列表
        function backToGames() {
            document.getElementById('game-area').classList.add('hidden');
            currentState.currentGame = null;
        }

        // 下一题
        function nextGame() {
            if (currentState.currentGame) {
                startGame(currentState.currentGame);
            }
        }

        // 显示成功提示
        function showSuccessToast(message, type = 'success') {
            const toast = document.getElementById('success-toast');
            const messageElement = document.getElementById('success-message');
            
            // 设置消息
            messageElement.textContent = message;
            
            // 设置样式
            if (type === 'error') {
                toast.classList.remove('bg-accent');
                toast.classList.add('bg-red-500');
            } else {
                toast.classList.remove('bg-red-500');
                toast.classList.add('bg-accent');
            }
            
            // 显示提示
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            // 3秒后隐藏
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // 显示指定区域
        function showSection(sectionName) {
            // 隐藏所有区域
            Object.values(sections).forEach(section => {
                section.classList.add('hidden');
            });
            
            // 显示指定区域
            sections[sectionName].classList.remove('hidden');
            
            // 如果是学习区域，更新数字显示
            if (sectionName === 'learning') {
                updateNumberDisplay();
            }
            
            // 如果是游戏区域，隐藏游戏内容
            if (sectionName === 'games') {
                document.getElementById('game-area').classList.add('hidden');
                currentState.currentGame = null;
            }
        }

        // 切换模态框
        function toggleModal(modalName) {
            const modal = modals[modalName];
            
            if (modal.classList.contains('hidden')) {
                // 隐藏所有模态框
                Object.values(modals).forEach(m => {
                    m.classList.add('hidden');
                });
                
                // 显示指定模态框
                modal.classList.remove('hidden');
                
                // 如果是进度模态框，更新进度显示
                if (modalName === 'progress') {
                    updateProgressDisplay();
                }
            } else {
                modal.classList.add('hidden');
            }
        }

        // 保存学习进度
        function saveProgress() {
            localStorage.setItem('learnedNumbers', JSON.stringify(currentState.learnedNumbers));
        }

        // 加载学习进度
        function loadProgress() {
            const savedProgress = localStorage.getItem('learnedNumbers');
            
            if (savedProgress) {
                currentState.learnedNumbers = JSON.parse(savedProgress);
            }
        }

        // 初始化应用
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>